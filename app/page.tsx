"use client";
import React from "react";

export default function HomeScreen() {
  const [isLoading, setLoading] = React.useState(false);
  const [userInput, setUserInput] = React.useState("");
  const [response, setResponse] = React.useState("");

  return (
    <div>
      {response && (
        <article className="output">
          <p>
            <small>{userInput}</small>
          </p>
          <p>
            {response}
          </p>
        </article>
      )}

      <form
        className="input"
        onSubmit={(event) => {
          event.preventDefault();
          setLoading(true);
          setResponse("");
          const userValue = event.target[0].value;
          setUserInput(userValue);

          fetch(`/api/private-cloud?message=${userValue}`)
            .then((response) => response.json())
            .then(({ data }) => {
              event.target[0].value = "";
              setResponse(data.message);
            })
            .finally(() => setLoading(false));
        }}
      >
        <div className="input-box">
          <input
            placeholder="Ask siri..."
          />
          <svg viewBox="0 0 199 196" xmlns="http://www.w3.org/2000/svg" aria-hidden>
            <path
              d="M175.697 93.7701L180.464 88.9416L175.697 93.7701ZM171.621 75.9134L165.232 73.6313L171.621 75.9134ZM164.743 141.763L162.543 135.344L164.743 141.763ZM34.8834 141.763L32.6836 148.182L34.8834 141.763ZM46.3031 156.083L39.5559 156.799L46.3031 156.083ZM23.9293 93.7701L19.1624 88.9416L23.9293 93.7701ZM140.929 37.4262L140.126 30.6888L140.929 37.4262ZM155.799 35.6538L154.996 28.9164L155.799 35.6538ZM186.354 104.291L191.121 99.4625L186.354 104.291ZM178.91 136.908L181.109 143.327L178.91 136.908ZM151.742 170.975L158.489 171.691L151.742 170.975ZM121.6 185.491L117.953 191.212L121.6 185.491ZM20.7168 136.908L18.517 143.327L20.7168 136.908ZM13.2721 104.291L8.50528 99.4625L13.2721 104.291ZM22.968 61.8106L16.5782 64.0927L22.968 61.8106ZM110.773 20.3211L118.659 33.0522L130.195 25.9064L122.309 13.1753L110.773 20.3211ZM170.93 98.5987L181.587 109.12L191.121 99.4625L180.464 88.9416L170.93 98.5987ZM176.71 130.489L162.543 135.344L166.943 148.182L181.109 143.327L176.71 130.489ZM87.0085 171.72L74.3799 179.769L81.6734 191.212L94.3021 183.164L87.0085 171.72ZM54.6313 170.258L53.0503 155.367L39.5559 156.799L41.1368 171.691L54.6313 170.258ZM34.3947 73.6313L29.3579 59.5285L16.5782 64.0927L21.615 78.1956L34.3947 73.6313ZM43.0243 42.3913L57.8946 44.1637L59.5006 30.6888L44.6304 28.9164L43.0243 42.3913ZM141.732 44.1637L156.602 42.3913L154.996 28.9164L140.126 30.6888L141.732 44.1637ZM170.268 59.5285L165.232 73.6313L178.011 78.1956L183.048 64.0927L170.268 59.5285ZM146.576 155.367L144.995 170.258L158.489 171.691L160.07 156.799L146.576 155.367ZM125.246 179.769L112.618 171.72L105.324 183.164L117.953 191.212L125.246 179.769ZM37.0831 135.344L22.9165 130.489L18.517 143.327L32.6836 148.182L37.0831 135.344ZM18.039 109.12L28.6961 98.5987L19.1624 88.9416L8.50528 99.4625L18.039 109.12ZM80.9677 33.0522L88.8535 20.3211L77.317 13.1753L69.4312 25.9064L80.9677 33.0522ZM118.659 33.0522C133.426 56.8934 150.973 78.8963 170.93 98.5987L180.464 88.9416C161.271 69.9941 144.397 48.8342 130.195 25.9064L118.659 33.0522ZM165.232 73.6313C155.799 100.042 149.537 127.479 146.576 155.367L160.07 156.799C162.918 129.98 168.94 103.594 178.011 78.1956L165.232 73.6313ZM162.543 135.344C136.014 144.436 110.658 156.647 87.0085 171.72L94.3021 183.164C117.045 168.668 141.43 156.925 166.943 148.182L162.543 135.344ZM112.618 171.72C88.9684 156.647 63.6127 144.436 37.0831 135.344L32.6836 148.182C58.1967 156.925 82.581 168.668 105.324 183.164L112.618 171.72ZM53.0503 155.367C50.0896 127.479 43.8272 100.042 34.3947 73.6313L21.615 78.1956C30.6862 103.594 36.7086 129.98 39.5559 156.799L53.0503 155.367ZM28.6961 98.5987C48.6535 78.8964 66.2003 56.8934 80.9677 33.0522L69.4312 25.9064C55.2296 48.8342 38.3551 69.9941 19.1624 88.9416L28.6961 98.5987ZM57.8946 44.1637C85.7417 47.4828 113.885 47.4828 141.732 44.1637L140.126 30.6888C113.345 33.8807 86.2809 33.8807 59.5006 30.6888L57.8946 44.1637ZM156.602 42.3913C166.107 41.2584 173.488 50.5138 170.268 59.5285L183.048 64.0927C189.657 45.589 174.506 26.5909 154.996 28.9164L156.602 42.3913ZM181.587 109.12C188.399 115.845 185.765 127.386 176.71 130.489L181.109 143.327C199.696 136.957 205.104 113.266 191.121 99.4625L181.587 109.12ZM144.995 170.258C143.984 179.777 133.319 184.914 125.246 179.769L117.953 191.212C134.522 201.773 156.415 191.23 158.489 171.691L144.995 170.258ZM74.3799 179.769C66.3077 184.914 55.6418 179.777 54.6313 170.258L41.1368 171.691C43.2111 191.23 65.1042 201.773 81.6734 191.212L74.3799 179.769ZM22.9165 130.489C13.8612 127.386 11.227 115.845 18.039 109.12L8.50528 99.4625C-5.47733 113.266 -0.0701351 136.957 18.517 143.327L22.9165 130.489ZM29.3579 59.5285C26.1383 50.5138 33.5193 41.2584 43.0243 42.3913L44.6304 28.9164C25.1201 26.5909 9.96958 45.589 16.5782 64.0927L29.3579 59.5285ZM122.309 13.1753C111.963 -3.52837 87.6634 -3.5284 77.317 13.1753L88.8535 20.3211C93.894 12.1834 105.732 12.1834 110.773 20.3211L122.309 13.1753Z"
            />
          </svg>
          {isLoading && <div className="loading">Carregando</div>}
        </div>
      </form>
    </div>
  );
}